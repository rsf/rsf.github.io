











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=DeadBeans by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:30:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: DeadBeans
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=DeadBeans' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='DeadBeans' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login24db.html?redirect=DeadBeans" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences24db.html?redirect=DeadBeans"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">DeadBeans</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'Wiki195c.html?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'Search136d.html?query=__PAGEHERE__','DeadBeans' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wiki1ab0.html?page=CheckRequestContextTag">CheckRequestContextTag</a>, <a class="wikipage" href="Wiki7ccd.html?page=CheckVersionTag">CheckVersionTag</a>, <a class="wikipage" href="Wikie781.html?page=CommentLinkTag">CommentLinkTag</a>, <a class="wikipage" href="Wiki6b77.html?page=ComponentRenderer">ComponentRenderer</a>, <a class="wikipage" href="Wiki9e05.html?page=ComponentTest/test-components-list.png">ComponentTest/test-components-list.png</a>, <a class="wikipage" href="Wiki7f2e.html?page=ComponentTest/test-components-select.png">ComponentTest/test-components-select.png</a>, <a class="wikipage" href="Wiki0573.html?page=Container">Container</a>, <a class="wikipage" href="Wikib9f4.html?page=ContainerSetupGuide/settings.xml">ContainerSetupGuide/settings.xml</a>, <a class="wikipage" href="Wikicf6f.html?page=ContentEncodingTag">ContentEncodingTag</a>, <a class="wikipage" href="Wiki12c3.html?page=Counter">Counter</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki81b4.html?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfo96a7.html?page=DeadBeans' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<div style=" background-color: #c0c0c0; border: 1px dotted black; padding: 0.2em; font-size: 200%; text-align: center">
--= OLD=--
</div>
<div style=" background-color: #c0c0c0; text-align: center">
This page predates the release of RSF 0.6 - whilst any reasoning here is probably still roughly valid, specific descriptions of the way RSF does things are probably not valid. The page may be left here either as a historical note, and/or because it refers to a part of RSF that no longer bears this name. Read it with caution.
</div>
<h2 id="section-DeadBeans-DeadBeansAndHibernate">Dead beans and Hibernate<a class="hashlink" href="#section-DeadBeans-DeadBeansAndHibernate">#</a></h2>
<p>As suggested in the <a class="wikipage" href="Wiki341c.html?page=BeanReasonableness">BeanReasonableness</a> page and elsewhere, the original goal for RSF was to be able at some point during the request cycle to declare the request writeable bean model as POJOs and have our way with them. Unfortunately it seems that Hibernate, at least, will not support this model, at least via any public functionality I can see, since
</p>
<ul><li>If an object is attached to a session, ANY query of a lazy property or collection will trigger the load of it, and
</li><li>If an object is detached, any query of a lazy property or collection that has not ALREADY been queried and loaded will cause an exception.
</li></ul><p>This implies it will be impossible to apply any straightforward serialization procedure to the contents of the request writeable bean model at any time, and we will have to adopt an even more minimal approach to requirements placed on beans before.
</p>
<p>In order to implement <a class="wikipage" href="Wikie53d.html?page=MultiRequestState">multi-request state</a>, we need some way to carry state from request to request, preferably not through keeping connections or sessions open which is unacceptable in a high-throughput environment. Also the use and/or expectation of <a class="wikipage" href="Wiki5086.html?page=LongTransaction">long transactions</a> in the bean model is too much of a burden to put on all users, and Ian reports these may be unreliable/destructive for some reason. But more, they place limits on server memory since they again rely on the presence of unserializable objects in memory.
</p>
<h3 id="section-DeadBeans-NewIdea14thOctober">New idea (14th October)<a class="hashlink" href="#section-DeadBeans-NewIdea14thOctober">#</a></h3>
<p>The new idea for implementing <a class="createpage" href="Login4b2f.html?page=MRSA" title="Create &quot;MRSA&quot;">MRSA</a> is to make use of the already present <a class="wikipage" href="Wiki965d.html?page=RequestSubmittedValueCache">RequestSubmittedValueCache</a> inside the <a class="createpage" href="Login4803.html?page=TRS" title="Create &quot;TRS&quot;">TRS</a>. As you recall, this in effect represents a sort of &quot;log&quot; of user activity throughout the request, and consists of data in a perfectly harmless form. If instead we preserve <i>this</i> rather than trying to preserve the bean model, we may simply accumulate to it during a multi-request cycle, with at each new view &quot;replaying&quot; the log so far in order to generate the identical<a class="footnoteref" href="#ref-DeadBeans-1">[1]</a> bean state that prevailed at the end of the last request.
</p>
<p>In this way we now have an <i>utterly</i> clean set of bean requirements that state that the bean model will be poked ONLY via <a class="wikipage" href="Wiki2b2a.html?page=EL">EL</a> and the <a class="wikipage" href="Wiki8a07.html?page=DARApplier">DARApplier</a> in response to user requests, and will CERTAINLY be thrown away at the end of each request, which would seem to be the most minimal restrictions on bean providers that are possible.
</p>
<p>The other upshot of this is that there are more demands than ever for the EL and reflective system to be highly efficient, which would seem to be quite achievable since they are all under our control since the <a class="createpage" href="Login98ae.html?page=SAXalizer" title="Create &quot;SAXalizer&quot;">SAXalizer</a> &quot;debacle&quot;. On the other hand it should be borne in mind that the length of RSVC &quot;log&quot; that will be replayed during a wizard is limited by the number of UI <i>CHANGES</i> that the user could physically have made, much less than the maximum editable user state presented per view.
</p>
<hr />
<a class="footnote" name="ref-DeadBeans-1">[#1]</a> Of course excluding the possibility that there has been some change to the underlying persistent state addressed by one of the previous requests. However, recall that on the one hand, the RSVC only records values CHANGED by the user via the UI, and so if the persistent change is orthogonal to the user's change, he should simply see this reflected in the current UI. If the persistent change overlaps completely and is overwritten by the user's change, the users current request will silently overwrite it as occuring later, should he submit later (we could easily build in a version exception here if required, since note that the RSVC <b>DOES</b> record the value of the field as seen by the user at request init which we could compare). Finally, in the awful case where the persistent change invalidates some dependent piece of state that the user's current request depends on, it is entirely reasonable to expect the bean model to throw some form of exception - in fact it is quite liable that it will throw anyway. This set of guarantees, which is essentially limited only by the bean provider's &quot;reasonable&quot; diligence, is far better than you are likely to get from JSF with client saving, for example, which could corrupt persistent state arbitrarily in the case of concurrent modification.







        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff62bd.html?page=DeadBeans&amp;r1=-1&amp;r2=1">30-Jul-2006 19:30</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login24db.html?redirect=DeadBeans" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences24db.html?redirect=DeadBeans"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki5e34.html?page=DeadBeans&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wikib2ab.html?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki4d3f.html?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="Wikid6f0.html?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki4c8c.html?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wikib1ce.html?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wikia56b.html?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki4509.html?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wikif010.html?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki45f9.html?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki30c9.html?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki0e27.html?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki1a8d.html?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wikiadaf.html?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki84f4.html?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wikif345.html?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki1535.html?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki580c.html?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki654d.html?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wikia360.html?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki151d.html?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki702d.html?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki5fc7.html?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wikife97.html?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki5130.html?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki5f9e.html?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki91dd.html?page=BeanReasonablenessRationale">BeanReasonablenessRa...</a><br /><a class="wikipage" href="Wikie53d.html?page=MultiRequestState">MultiRequestState</a><br /><a class="wikipage" href="Wikibcf8.html?page=ObstinateMap">ObstinateMap</a><br /><a class="wikipage" href="Wiki89ee-2.html?page=RSVCVersusDeadBeansMRSA">RSVCVersusDeadBeansM...</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=DeadBeans by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:30:02 GMT -->
</html>

