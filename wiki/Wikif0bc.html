











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=State by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:54:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: State
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=State' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='State' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Logine5e2.html?redirect=State" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferencese5e2.html?redirect=State"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">State</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'Wiki195c.html?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'Search136d.html?query=__PAGEHERE__','State' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wikiaef4.html?page=ScriptedVSCodedWebapps">ScriptedVSCodedWebapps</a>, <a class="wikipage" href="Wiki918f.html?page=SearchPlugin">SearchPlugin</a>, <a class="wikipage" href="Wiki83d7.html?page=SearchResultIteratorTag">SearchResultIteratorTag</a>, <a class="wikipage" href="Wikia846.html?page=SearchResultsSizeTag">SearchResultsSizeTag</a>, <a class="wikipage" href="Wiki6b71.html?page=SearchResultsTag">SearchResultsTag</a>, <a class="wikipage" href="Wikifdce.html?page=ShortURLConstructor">ShortURLConstructor</a>, <a class="wikipage" href="Wikicef7.html?page=ShortViewURLConstructor">ShortViewURLConstructor</a>, <a class="wikipage" href="Wikic255.html?page=SpamFilter">SpamFilter</a>, <a class="wikipage" href="Wiki0292.html?page=SpringMVCStep/springapp-postbox.png">SpringMVCStep/springapp-postbox.png</a>, <a class="wikipage" href="Wikie29f.html?page=SpringMVCStepRSF">SpringMVCStepRSF</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki81b4.html?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfof0bc.html?page=State' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<div style=" background-color: #c0c0c0; border: 1px dotted black; padding: 0.2em; font-size: 200%; text-align: center">
--= OLD=--
</div>
<div style=" background-color: #c0c0c0; text-align: center">
This page predates the release of RSF 0.6 - whilst any reasoning here is probably still roughly valid, specific descriptions of the way RSF does things are probably not valid. The page may be left here either as a historical note, and/or because it refers to a part of RSF that no longer bears this name. Read it with caution.
</div>
<h2 id="section-State-PersistentState"> Persistent state<a class="hashlink" href="#section-State-PersistentState">#</a></h2>
The handling of persistent state in RSF is entirely a matter for the framework client, and RSF will try not to get in your way with whatever scheme you choose to adopt (whether based on Hibernate, iBatis or something wierd and wonderful of your own devising) - this matter is considered be &quot;below the <a class="wikipage" href="Wikif165.html?page=BeanLine">bean line</a>&quot; as far as RSF is concerned, although some assistance is planned for clients using proxying bean frameworks like Hibernate.
<h2 id="section-State-InterRequestStateAndMultiRequestStateMRSA"> Inter-request state and Multi-request state (MRSA)<a class="hashlink" href="#section-State-InterRequestStateAndMultiRequestStateMRSA">#</a></h2>
However, RSF also spontaneously (and hopefully transparently) stores some state between requests (with a shorter lifetime) in order to manage the orderly abstraction that it maintains for clients, away from the somewhat peculiar semantics induced by the HTTP GET/POST protocol.
<h3 id="section-State-ComparisonsAndMotivation">Comparisons and motivation<a class="hashlink" href="#section-State-ComparisonsAndMotivation">#</a></h3>
State in web frameworks is a real sore potato, or else a hot point. JSF, for example, has an interestingly configurable strategy allowing clients to choose between a solution whereby inter-request state is stored wholly on the client in a wodge of hidden fields, or on the server in a big lump of <a class="wikipage" href="Wikiac81.html?page=SessionConsideredHarmful">session</a> state. By supplying the StateHandler interface, it also allows &quot;complete&quot; flexibility to the programmer to adopt hybrid or custom strategies - Oracle, for example in their <a class="external" href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/jsf/index.html">ADF components for JSF</a><img class="outlink" src="images/out.png" alt="" /> provided an interesting hybrid strategy, slightly suggestive of the RSF solution, whereby a client-side token is used as an index into server state. As another example, Tapestry appears to keep a pool of application-wide &quot;template&quot; objects into which request-specific state is blown (reminiscent of an early <a class="wikipage" href="Wikia36a.html?page=RSAC">RSAC</a> implementation tried in RSF), on the observation that server-side memory state is highly precious, which it indeed is. I have heard that Microsoft's ASP.NET adopts a heavily client-based solution whereby the per-request state is heavily compressed into an encoded, serialised form blob (Comments?).
<p>In its current state RSF does not offer so much configurability in this area as JSF did, but observes that a lot of the pressure on JSF to be so flexible was created by the large quantity of (arguably) unnecessary data that the framework architecture obliged to be kept around, to wit, the entire view component tree complete with listeners, validators and even non-input components. RSF tries hard to define the <i>bare minimum</i> of inter-request state required for correct and robust handling, and store it in the place which appears to offer the best overall tradeoffs. At some point on the roadmap there are plans for a point of configuration where clients can choose between a client-based &quot;hidden field&quot; solution or a server-based &quot;token&quot; solution specifically for the <a class="wikipage" href="Wikie53d.html?page=MultiRequestState">multi-request state</a>, but most of the &quot;core&quot; RSF state needs to stay where it is, detailed as follows:
</p>
<h3 id="section-State-ClientAndServerStorage">Client and server storage<a class="hashlink" href="#section-State-ClientAndServerStorage">#</a></h3>
The per-request state in RSF is generally split between client and server, with &quot;as much as possible&quot; sent to the client to live, as can be put there without compromising robustness.
<h4 id="section-State-ClientStorageFossilizedBindings">Client storage - fossilized bindings<a class="hashlink" href="#section-State-ClientStorageFossilizedBindings">#</a></h4>
For every view component capable of accepting user input, there is sent a &quot;shadow&quot; hidden field which is initialised by the <a class="wikipage" href="Wiki0715.html?page=FossilisedBinding">&quot;fossilized binding&quot;</a> for the field, which stores its old value at the time of rendering, and a mapping from the component's unique <a class="wikipage" href="Wikid8cf.html?page=IDs">component ID</a> (full ID) to its <a class="wikipage" href="Wiki070a.html?page=ValueBinding">value binding</a>. There is in addition a lump of extra storage encoded in the name of each form component capable of generating submission.
<h4 id="section-State-ServerStorageTokenRequestState">Server storage - TokenRequestState<a class="hashlink" href="#section-State-ServerStorageTokenRequestState">#</a></h4>
Storage on the server is indexed by the <a class="wikipage" href="Wikif891.html?page=ViewToken">view token</a>, and is stored by the application bean <a class="createpage" href="Logina543.html?page=TokenRequestHolder" title="Create &quot;TokenRequestHolder&quot;">TokenRequestHolder</a> in instances of the class <a class="createpage" href="Login7728.html?page=TokenRequestState" title="Create &quot;TokenRequestState&quot;">TokenRequestState</a> (TRS).
<p>Information stored in TRS is recognised to be holding onto vastly precious server-side resources, and so is only placed when absolutely necessary, and continuously expired based on a TTL policy. The state there comes into the following categories:
</p>
<ol><li>Information on errors that occurred during the previous request cycle generating the current page. This is stored in a <a class="wikipage" href="Wikibefa.html?page=TargettedMessageList">TargettedMessageList</a>, which enables messages to be delivered to stand next to relevant fields displayed in the UI. Errors are expected to mainly be generated during POST cycles, although there is support for displaying generalised errors arising through GET rendering in an untargetted way. The TTL of error state should be generally small, since it should  generally be sufficient for the user to see the error state only once following the erroneous request, with provision made for short-term network or load problems allowing the view to be refreshed a few times. There is not yet any implementation for expiring this state on a different schedule to the rest of TRS however.
</li><li>In the case of a POST submission resulting in an error, the previously submitted user values should be maintained so that the following GET may render the input components with the user-submitted values attached so they may be edited and resubmitted. This is stored in the <a class="wikipage" href="Wiki965d.html?page=RequestSubmittedValueCache">RequestSubmittedValueCache</a> (RSVC), which stores a pre-<a class="wikipage" href="Wiki2b2a.html?page=EL">EL</a>-application cache of the incoming values on the submit. Once the rest of the RSF architecture is firmed up, it may be possible to do away with the need for this separate cache, and use a propagating bean state instead to achieve the same effect, with the cost of an extra round-trip to and from bean state. This requires the implementation of both <a class="wikipage" href="Wikie53d.html?page=MultiRequestState">multi-request state</a> and <a class="wikipage" href="Wiki2ca1.html?page=Fixup">component fixups</a> which are required anyway for the framework to be considered in any way complete (current plan - November!) (2005!)
</li><li>Some user operations cannot be fully committed to persistent state in the scope of a single request cycle since they are functionally incomplete (read - wizards). RSF <i>could</i> attempt to propagate the request bean state between requests, but after investigation of some of the more dynamic sorts of bean model (read - Hibernate) this has been decided inpractical. Instead RSF stores a &quot;log&quot; of user activities to be replayed with increasing length at each stage of a multi-stage wizard, which will restore the bean model from scratch that would have persisted at that stage of the wizard had it been preserved. In fact, we discover we can store this log in the <a class="wikipage" href="Wiki965d.html?page=RequestSubmittedValueCache">RSVC</a> itself along with user error values. More discussion on this issue in <a class="wikipage" href="Wikie53d.html?page=MultiRequestState">multi-request state</a>.
</li></ol>






        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff6cc5.html?page=State&amp;r1=-1&amp;r2=1">30-Jul-2006 19:28</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Logine5e2.html?redirect=State" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferencese5e2.html?redirect=State"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki1030.html?page=State&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wikib2ab.html?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki4d3f.html?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="Wikid6f0.html?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki4c8c.html?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wikib1ce.html?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wikia56b.html?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki4509.html?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wikif010.html?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki45f9.html?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki30c9.html?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki0e27.html?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki1a8d.html?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wikiadaf.html?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki84f4.html?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wikif345.html?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki1535.html?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki580c.html?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki654d.html?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wikia360.html?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki151d.html?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki702d.html?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki5fc7.html?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wikife97.html?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki5130.html?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki5f9e.html?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki6c20.html?page=MultiRequest">MultiRequest</a><br /><a class="wikipage" href="Wikie53d.html?page=MultiRequestState">MultiRequestState</a><br /><a class="wikipage" href="Wikiac81.html?page=SessionConsideredHarmful">SessionConsideredHar...</a><br /><a class="wikipage" href="Wikif891.html?page=ViewToken">ViewToken</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=State by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:54:36 GMT -->
</html>

