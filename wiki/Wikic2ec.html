











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=RSFJSLibrary by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: RSFJSLibrary
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=RSFJSLibrary' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='RSFJSLibrary' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login839c.html?redirect=RSFJSLibrary" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences839c.html?redirect=RSFJSLibrary"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">RSFJSLibrary</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'Wiki195c.html?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'Search136d.html?query=__PAGEHERE__','RSFJSLibrary' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wiki5b2e.html?page=WebWork">WebWork</a>, <a class="wikipage" href="Wiki5fdf.html?page=View">View</a>, <a class="wikipage" href="Wiki35d7.html?page=ViewTemplate">ViewTemplate</a>, <a class="wikipage" href="Wikida94.html?page=IKATFunctionCall">IKATFunctionCall</a>, <a class="wikipage" href="Wikieede.html?page=IKATAlgorithm">IKATAlgorithm</a>, <a class="wikipage" href="Wiki517d.html?page=BuildingRSFComponents">BuildingRSFComponents</a>, <a class="wikipage" href="Wikieedc.html?page=HibernateCookBook_1">HibernateCookBook_1</a>, <a class="wikipage" href="Wiki760a.html?page=IKATSerializer">IKATSerializer</a>, <a class="wikipage" href="Wiki2c4e.html?page=LogonTest_2">LogonTest_2</a>, <a class="wikipage" href="Wikid3cc.html?page=DataViews">DataViews</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki81b4.html?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfoc2ec.html?page=RSFJSLibrary' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<h2 id="section-RSFJSLibrary-RSFJavascriptLibrary"> RSF Javascript Library<a class="hashlink" href="#section-RSFJSLibrary-RSFJavascriptLibrary">#</a></h2>
<p>RSF includes a javascript library (rsf.js) as an optional component (part of the RSFComponents package). You can <a class="external" href="https://saffron.caret.cam.ac.uk/svn/projects/RSFComponents/trunk/templates/src/webapp/content/js/rsf.js">download the latest version of this library</a><img class="outlink" src="images/out.png" alt="" /> directly but it is easier to simply include the <a class="external" href="https://saffron.caret.cam.ac.uk/svn/projects/RSFComponents/trunk/">latest RSFComponents package</a><img class="outlink" src="images/out.png" alt="" /> in your application.
</p>
<h3 id="section-RSFJSLibrary-UsingTheRSFJavascriptLibrary"> Using the RSF javascript library<a class="hashlink" href="#section-RSFJSLibrary-UsingTheRSFJavascriptLibrary">#</a></h3>
<ul><li>First you need to ensure the library will be available in your app
</li><li>You have 2 options
<ul><li><b>Option 1:</b> (Preferred) Use maven to include the library by adding this to your project.xml or pom.xml 
</li></ul></li></ul><pre>
&lt;dependency&gt;
	&lt;groupId&gt;uk.org.ponder.rsfutil&lt;/groupId&gt;
	&lt;artifactId&gt;RSFComponents-templates&lt;/artifactId&gt;
	&lt;version&gt;${rsfutil.version}&lt;/version&gt;
	&lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;
</pre>
<ul><li><ul><li><b>Option 2:</b> You can manually copy the rsf.js file into a <b>js</b> directory at the same level as your <b>content</b> directory
</li></ul></li><li>Then you will need to include the library in your template like so (using the default RSF application structure):
</li></ul><pre>
&lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot; src=&quot;../js/rsf.js&quot;&gt;&lt;/script&gt;
</pre>
<ul><li>Now you can call various methods in the <b>RSF.</b> AJAX namespace
<ul><li>All functions are contained within the RSF. namespace to avoid polluting the global namespace
</li></ul></li></ul><h3 id="section-RSFJSLibrary-KeyMethodsInTheRSFJavascriptLibrary"> Key methods in the RSF javascript library<a class="hashlink" href="#section-RSFJSLibrary-KeyMethodsInTheRSFJavascriptLibrary">#</a></h3>
<h4 id="section-RSFJSLibrary-GetAJAXUpdater"> getAJAXUpdater<a class="hashlink" href="#section-RSFJSLibrary-GetAJAXUpdater">#</a></h4>
<p><b>Summary:</b>
Allows a developer to create a method that will trigger an AJAX request when it is called and then send the response to another function so they can define what should happen with the response.<br />
<b>Return:</b> a function which can be executed safely at any point and will generate an AJAX request<br />
<b>Parameters:</b> 
</p>
<ul><li>inputFields (array) - an array of javascript objects which contain the data you want to send in the AJAX request to the UVB, this should be the actual objects and not ids, this cannot not be null but it can be an empty array in the case where we do not want to send any data and only want to use the ajax request as a trigger for server side processing
</li><li>ajaxUrl (string) - this is the URL to the page where the AJAX request will be sent, when using UVB, this should be passed into the page so that it can be picked up from the form.
</li></ul>There are many acceptable ways to do this, but for example, this would go in your producer to set the form action to the address of the built in UVB producer: 
<pre>
form.viewparams = new SimpleViewParameters(UVBProducer.VIEW_ID);
</pre> 
And this would go in your template (or even better, your .js file) to get the URL out of the form:
<pre>
var ajaxUrl = inputField.form.action; // get the URL from the form
</pre>
<ul><li>elBindings (array) - an array of strings which indicate an EL path for the UVB producer to get results of the AJAX request, this is the RSF <a class="wikipage" href="Wiki2b2a.html?page=EL">EL</a> to a request bean method which returns some data which the UVB producer will turn into XML and then send back as an AJAX response, effectively this calls a method on a bean and the returns the XML encoded version of whatever data that method returns
</li><li>callback (function) - a function which defines what to do when the ajax response is received, the response will be placed in the first parameter as a javascript object (results) which holds the response data, the response is encoded into a structure to make it easy to get data out:
</li></ul><div style="margin-left:2em;">
<table class="wikitable" border="1"><tr class="odd"><td> results.EL </td><td> map of elBinding =&gt; text value returned from the request model (will be encoded if it is an array)</td></tr>
<tr><td> restuls.message </td><td> map of target =&gt; text for any TargettedMessages generated during the request cycle</td></tr>
<tr class="odd"><td> resutls.isError </td><td> true if the request is in error (exception or error message generated during processing), false otherwise</td></tr>
</table>For example:
<pre>
var callback = function(results) {
   // result.EL is a map of ELbinding -&gt; JS Object
   var resultField = document.getElementById(&quot;result_field&quot;);
   // get out the object (which is a string array in this case) and decode it
   var resultArray = RSF.decodeRSFStringArray(results.EL[elBinding]);
   resultField.innerHTML = resultArray; // dump the JS array contents into a div
}
</pre>
</div>
<b>Example:</b> 
<pre>
function initMyAjaxStuff(fieldId, elBinding) {
   // get the field we are working with
   var inputField = document.getElementById(fieldId);
   // get the URL from the form
   var ajaxUrl = inputField.form.action;

   var callback = function(results) {
      // this function (callback) defines what to do 
      // when the ajax response is received,
      // the response will be placed in the &quot;results&quot; variable

      // result.EL is a map of ELbinding -&gt; JS Object
      var resultField = document.getElementById(&quot;result_field&quot;);
      // get out the object (which is a string array in 
      // this case) and decode it
      var resultArray = RSF.decodeRSFStringArray(results.EL[elBinding]);
      // output the array on the screen
      resultField.innerHTML = resultArray;
   }

   // setup the function which initiates the AJAX request
   var updater = RSF.getAJAXUpdater([inputField], ajaxUrl, [elBinding], callback);
   // setup the input field event to trigger the ajax request function
   inputField.onkeyup = updater; // for when the user is typing in the field
   inputField.onchange = updater; // for when they copy and paste
}
</pre>
<h4 id="section-RSFJSLibrary-DecodeRSFStringArray"> decodeRSFStringArray<a class="hashlink" href="#section-RSFJSLibrary-DecodeRSFStringArray">#</a></h4>
<p><b>Summary:</b> Allows a developer to process returned encoded string data from RSF UVB which represents an array. Should only be used when the data is encoded as it will fail on non-encoded data.<br />
<b>Return:</b> a javascript array object with the contents of original array<br />
<b>Parameters:</b> 
</p>
<ul><li>encodedString - a string returned from the UVB which was an array in Java and has been encoded, the encoding looks like: <tt>3:5:aaron2:is4:cool</tt>, the first number is the number of items in the array, all other numbers are the text size of the array item in the encoded string followed by &quot;:&quot; and the value
</li></ul><b>Example:</b> 
<pre>
var resultField = document.getElementById(&quot;result_field&quot;);
// decode the string array into a real javascript array
var resultArray = RSF.decodeRSFStringArray(results.EL[elBinding]);
// set the contents of a div to the first thing in the array
resultField.innerHTML = resultArray[0];
</pre>
<h3 id="section-RSFJSLibrary-WhatAboutTheRest"> What about the rest?<a class="hashlink" href="#section-RSFJSLibrary-WhatAboutTheRest">#</a></h3>
You can look at the rsf.js file to find out what other methods are included or post on the forums if you are using a method and it is confusing and should be documented.







        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff7163.html?page=RSFJSLibrary&amp;r1=-1&amp;r2=1">22-Jul-2007 13:02</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login839c.html?redirect=RSFJSLibrary" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences839c.html?redirect=RSFJSLibrary"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki87cc.html?page=RSFJSLibrary&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wikib2ab.html?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki4d3f.html?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="Wikid6f0.html?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki4c8c.html?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wikib1ce.html?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wikia56b.html?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki4509.html?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wikif010.html?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki45f9.html?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki30c9.html?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki0e27.html?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki1a8d.html?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wikiadaf.html?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki84f4.html?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wikif345.html?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki1535.html?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki580c.html?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki654d.html?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wikia360.html?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki151d.html?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki702d.html?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki5fc7.html?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wikife97.html?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki5130.html?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki5f9e.html?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki917c.html?page=AJAX">AJAX</a><br /><a class="wikipage" href="Wiki4d13.html?page=UniversalViewBus">UniversalViewBus</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=RSFJSLibrary by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:32 GMT -->
</html>

