












<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Diff.jsp?page=HibernateCookBook_4&r1=-1 by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:55:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: HibernateCookBook_4
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='diff' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=HibernateCookBook_4' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='HibernateCookBook_4' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
    <meta name="robots" content="noindex,nofollow" />
  
  
    <meta name="robots" content="noindex,follow" />
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="http://rsf.fluidproject.org/wiki/Login.jsp?redirect=HibernateCookBook_4" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="http://rsf.fluidproject.org/wiki/UserPreferences.jsp?redirect=HibernateCookBook_4"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">HibernateCookBook_4</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Wiki.jsp?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Edit.jsp?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Edit.jsp?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Search.jsp?query=__PAGEHERE__','HibernateCookBook_4' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=UserNameTag">UserNameTag</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=ValueBinding">ValueBinding</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=VariableTag">VariableTag</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=VeryLazyBeans">VeryLazyBeans</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=ViewID">ViewID</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=ViewRender">ViewRender</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=WeblogEntryPlugin">WeblogEntryPlugin</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=WeblogPlugin">WeblogPlugin</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=WikiFormsExampleText">WikiFormsExampleText</a>, <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=XPP">XPP</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      


















  <div class="tabmenu">

  

  

  
  

  

  <a id="menu-pagecontent" href='http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_4' accesskey="v" ><span class='accesskey'>V</span>iew</a>

  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>

  
  <a class="activetab" id="menu-info" accesskey="i" ><span class='accesskey'>I</span>nfo</a>

  </div>
<div class="tabs">

  <div id="pagecontent" class="hidetab" >

      
  </div>


  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>


  
  <div id="info" >

  <p>
  This page (revision-1) was last changed on <a href="http://rsf.fluidproject.org/wiki/Diff.jsp?page=HibernateCookBook_4&amp;r1=-1&amp;r2=1"
        title="Show changes of last page update" >
        19-Jul-2006 09:36
      </a> by UnknownAuthor

  
  </p>

  

  
  
      <p>Only authorized users are allowed to rename pages.</p>
  

  
  
      <p>Only authorized users are allowed to delete pages.</p>
  

  <div class="collapsebox-closed" id="incomingLinks">
  <h4>Incoming links</h4>
    <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_4" accesskey="" title="">HibernateCookBook_4</a>
    <ul><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook">HibernateCookBook</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_1">HibernateCookBook_1</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_2">HibernateCookBook_2</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_3">HibernateCookBook_3</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=IDDefunnellingReshaper">IDDefunnellingReshaper</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=LogonTest_3">LogonTest_3</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=NumberGuessing">NumberGuessing</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=NumberGuessing_3">NumberGuessing_3</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=OTP">OTP</a>
</li><li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=QampA">QampA</a>
</li></ul>
  </div>

  <div class="collapsebox-closed" id="outgoingLinks">
  <h4>Outgoing links</h4>
    <div class="ReferredPagesPlugin">
<a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_4" title="ReferredPagesPlugin: depth[1] include[.*] exclude[^$] format[compact]">HibernateCookBook_4</a>
<ul>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook">HibernateCookBook</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_1">HibernateCookBook_1</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_2">HibernateCookBook_2</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_3">HibernateCookBook_3</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=PartialWAR">PartialWAR</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=RSAC">RSAC</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=RequestScopeViewProducers">RequestScopeViewProducers</a></li>
<li><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=UISelect">UISelect</a></li>
</ul>
</div>

  </div>

  <div class="clearbox"></div>

  
  
     












<form action="http://rsf.fluidproject.org/wiki/Diff.jsp" method="get" accept-charset="UTF-8">
<div class="collapsebox" id="diffcontent">
  <h4>
       <input type="hidden" name="page" value="HibernateCookBook_4" />
       Difference between version <select id="r1" name="r1" onchange="this.form.submit();" >
           
             <option value="-1" selected="selected" >-1</option>
           
           </select> and <select id="r2" name="r2" onchange="this.form.submit();" >
           
             <option value="-1" selected="selected" >-1</option>
           
           </select>
  </h4>

  

  <div class="diffbody">
    <table class="diff" border="0" cellspacing="0" cellpadding="0">
<tr><td class="diff">At line 1 added 166 lines</td></tr>
<tr><td class="diffadd">!!! Let's hear that one more time - this time in Java</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Having inherited a working XML-driven app at the end of the last page, we will show how straightforward it is to move over to pure Java view producers. The app we produce here functions identically to the {{category}} version we just developed.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Why use Java producers?</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">In general, Java view producers will be considerably more efficient than the XML equivalents - not only because of losing the overhead of parsing XML files (actually these are cached at application scope anyway - but there is some overhead in cloning their object content), but also because Java producers can take a number of &quot;shortcuts&quot; in constructing the component tree. The most important shortcut is avoiding issuing EL bindings for components that will generate no input. A Java producer will generally have the app's data model right in its hands, and it is much quicker to fish out and render the relevant values during production, rather than wait for this to happen during fixup - mainly since there is one layer less of reflection.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Another important time saver is that view logic is now &quot;actual&quot; logic - where in the XML world we had Replicators and Switches, we now have loops and {{if}} statements.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">But basically, Java producers are just more idiomatic, and make full use of the available tool chain. XML component production is really only intended for &quot;autogenerated&quot; apps (perhaps via XSLs), or perhaps environments where apps may frequently be &quot;hot-edited&quot;.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Changes</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">In many frameworks, the change from XML view definitions to Java code might be a lot of upheaval, but in RSF you will see that the great majority of our app survives untouched. Naturally we will continue using exactly the same HTML templates, and also the same auto-generated data model. Most of the same beans will be defined in Spring, with only the extra beans required to define our views. An interesting insulating feature of RSF is that, despite being a Hibernate-driven app, our Java code will *still* contain no reference to Hibernate classes - this is the sort of benefit that Spring-enabled apps tend to enjoy, and RSF is careful to preserve it.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Build structure</td></tr>
<tr><td class="diffadd">Since this is the &quot;definitive&quot; version of the app, we have given it a fully mature build structure separating it into three separate Maven artefacts. Firstly, [category-datamodel|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/category-datamodel/] defines ''just'' the autogenerated Hibernate datamodel and the Hbm2Java task that builds it. In complex environments this artefact (producing a JAR) may need to be deployed to a different target than the webapp.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Secondly, there is the &quot;main code&quot; for the application, defined as a [partial WAR|PartialWAR] in [javacategory-code|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/javacategory-code/]. This defines all the logic of the application, and produces a WAR artefact that just needs to be livened up by the addition of some JARs to lib and the web.xml.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">These missing elements are held in the third component, [javacategory-webapp|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/javacategory-webapp/].  This is a slimline artefact that contains the main deploy task and packaging. Just issue {{maven}} from this directory to execute the top-level build.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">All of these artefacts may easily be checked out from SVN by using the [rsf-samples|https://saffron.caret.cam.ac.uk/svn/bundles/rsf-samples/] external, described on the main downloads page.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">NB - to allow Maven to compile both app and auto-generated source trees in the same project, we need a bit of hackery - please consult the [maven.xml|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/javacategory-webapp/maven.xml] for details. In production you would split an app into 2 or more Maven projects to make your builds more coherent.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Recipes listing</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">The recipes listing view {{[recipes|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/javacategory-code/src/java/uk/org/ponder/rsf/cookbook/producers/Recipes.java]}} is one of the most complicated views, and also shows a few contrasts with its XML counterpart - here is the full source minus imports:</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">{{{</td></tr>
<tr><td class="diffadd">public class Recipes implements ViewComponentProducer {</td></tr>
<tr><td class="diffadd">  public static final String VIEW_ID = &quot;recipes&quot;;</td></tr>
<tr><td class="diffadd">  private List recipelist;</td></tr>
<tr><td class="diffadd">  public String getViewID() {</td></tr>
<tr><td class="diffadd">    return VIEW_ID;</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">  public void setRecipeList(List recipelist) {</td></tr>
<tr><td class="diffadd">    this.recipelist = recipelist;</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd">  </td></tr>
<tr><td class="diffadd">  public void fillComponents(UIContainer tofill, ViewParameters viewparams, </td></tr>
<tr><td class="diffadd">         ComponentChecker checker) {</td></tr>
<tr><td class="diffadd">    UIForm form = UIForm.make(tofill, &quot;basic-form&quot;);</td></tr>
<tr><td class="diffadd">    for (int i = 0; i &lt; recipelist.size(); ++ i) {</td></tr>
<tr><td class="diffadd">      Recipe recipe = (Recipe) recipelist.get(i);</td></tr>
<tr><td class="diffadd">      String id = recipe.getId().toString();</td></tr>
<tr><td class="diffadd">      UIBranchContainer reciperow = UIBranchContainer.make(form, &quot;recipe-row:&quot;, id);</td></tr>
<tr><td class="diffadd">      UIOutput.make(reciperow, &quot;confirm-title&quot;, recipe.getTitle());</td></tr>
<tr><td class="diffadd">      UIInternalLink.make(reciperow, &quot;recipe-show&quot;, recipe.getTitle(), </td></tr>
<tr><td class="diffadd">          new EntityCentredViewParameters(RecipeShow.VIEW_ID, </td></tr>
<tr><td class="diffadd">              new EntityID(&quot;Recipe&quot;, id), null));</td></tr>
<tr><td class="diffadd">      Category category = recipe.getCategory();</td></tr>
<tr><td class="diffadd">      UIOutput.make(reciperow, &quot;recipe-category&quot;, category == null? &quot;&quot; : category.getName());</td></tr>
<tr><td class="diffadd">      SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</td></tr>
<tr><td class="diffadd">      UIOutput.make(reciperow, &quot;recipe-date&quot;, sdf.format(recipe.getDate()));</td></tr>
<tr><td class="diffadd">      UICommand destroy = UICommand.make(reciperow, &quot;recipe-destroy&quot;);</td></tr>
<tr><td class="diffadd">      destroy.parameters.add(new UIDeletionBinding(&quot;#{Recipe.&quot; + id +&quot;}&quot;));</td></tr>
<tr><td class="diffadd">    }</td></tr>
<tr><td class="diffadd">    UIInternalLink.make(tofill, &quot;recipe-create&quot;, </td></tr>
<tr><td class="diffadd">        new EntityCentredViewParameters(RecipeEdit.VIEW_ID, new EntityID(&quot;Recipe&quot;, &quot;new 1&quot;),</td></tr>
<tr><td class="diffadd">            EntityCentredViewParameters.MODE_NEW));</td></tr>
<tr><td class="diffadd">    UIInternalLink.make(tofill, &quot;index&quot;, new SimpleViewParameters(Index.VIEW_ID));    </td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">}</td></tr>
<tr><td class="diffadd">}}}</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Entity injection</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">The first thing to notice is that this is clearly a [request scope view producer|RequestScopeViewProducers] - observe that the list of recipes it works on has been ''injected'' into it using RSF's request-scope Spring clone, [RSAC]: {{public void setRecipeList(List recipelist) }}. In fact this dependency has been resolved to exactly the same HQLQuery bean that we used in the XML view - this sort of capability not only keeps our code free of Hibernate dependence, but also saves us from having to write a tedious &quot;DAO&quot;/&quot;Service&quot; layer for our app.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Direct Java</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Secondly, we see that each line of the recipe table is built up by a good old-fashioned {{for}} loop iterating over the list. This in general is much faster than the XML equivalent using the Replicator.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Further interesting contrasts with {{[recipes.xml|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/xmlcategory/src/webapp/WEB-INF/producers/recipes.xml]}}  are i) the direct use of calls like {{recipe.getTitle()}} and {{category.getName()}} instead of issuing ELs for deferred evaluation, and ii) the use of a Java standard &quot;SimpleDateFormat&quot; in place of the date rendering {{resolver}} we had to use in XML - these are the sorts of &quot;back to basics&quot; benefit that becomes more and more important with larger and more complex ViewProducers.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">However, in its functional effects this producer is one-for-one identical with its XML counterpart - exactly the same tree of components is produced (with a few missing EL references where Java can achieve the same effect directly).</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Static {{VIEW_ID}}s</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">A final thing to note is the use of the static field {{VIEW_ID}} to encode the view of this producer. This is a good victory for &quot;Don't repeat yourself&quot; semantics since it enables ViewProducers to issue internal links to one another in a type-safe way (e.g. {{RecipeEdit.VIEW_ID}}). Given our ''complete'' separation of presentation from content in RSF, we cannot avoid mentioning the same strings in HTML as we do in code, but at least once we are within code, each view id appears in just one place.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">! Similarities</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">The other &quot;complex&quot; view in our app is the recipe editing view - not only does it include an entity selection control, but also defines some navigation semantics:</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">{{{</td></tr>
<tr><td class="diffadd">public class RecipeEdit implements ViewComponentProducer,</td></tr>
<tr><td class="diffadd">    NavigationCaseReporter, ViewParamsReporter {</td></tr>
<tr><td class="diffadd">  public static final String VIEW_ID = &quot;recipe-edit&quot;;</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">  public String getViewID() {</td></tr>
<tr><td class="diffadd">    return VIEW_ID;</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">  public void fillComponents(UIContainer tofill, ViewParameters viewparams,</td></tr>
<tr><td class="diffadd">      ComponentChecker checker) {</td></tr>
<tr><td class="diffadd">    EntityCentredViewParameters ecvp = (EntityCentredViewParameters) viewparams;</td></tr>
<tr><td class="diffadd">    UIOutput.make(tofill, ecvp.mode</td></tr>
<tr><td class="diffadd">        .equals(EntityCentredViewParameters.MODE_NEW) ? &quot;new-recipe-heading&quot;</td></tr>
<tr><td class="diffadd">        : &quot;edit-recipe-heading&quot;);</td></tr>
<tr><td class="diffadd">    UIForm form = UIForm.make(tofill, &quot;basic-form&quot;);</td></tr>
<tr><td class="diffadd">    UIInput.make(form, &quot;recipe-title&quot;, &quot;#{&quot; + ecvp.getELPath() + &quot;.title}&quot;);</td></tr>
<tr><td class="diffadd">    UIInput.make(form, &quot;recipe-description&quot;, &quot;#{&quot; + ecvp.getELPath()</td></tr>
<tr><td class="diffadd">        + &quot;.description}&quot;);</td></tr>
<tr><td class="diffadd">    UISelect category = UISelect.make(form, &quot;recipe-category&quot;);</td></tr>
<tr><td class="diffadd">    category.optionlist = UIOutputMany.make(&quot;#{categories-all}&quot;,</td></tr>
<tr><td class="diffadd">        &quot;#{fieldGetter.id}&quot;);</td></tr>
<tr><td class="diffadd">    category.optionnames = UIOutputMany.make(&quot;#{categories-all}&quot;,</td></tr>
<tr><td class="diffadd">        &quot;#{fieldGetter.name}&quot;);</td></tr>
<tr><td class="diffadd">    category.selection = new UIInput();</td></tr>
<tr><td class="diffadd">    category.selection.valuebinding = new ELReference(&quot;#{&quot; + ecvp.getELPath()</td></tr>
<tr><td class="diffadd">        + &quot;.category.id}&quot;);</td></tr>
<tr><td class="diffadd">    category.selection.darreshaper = new ELReference(&quot;#{id-defunnel}&quot;);</td></tr>
<tr><td class="diffadd">    UIInput.make(form, &quot;recipe-instructions&quot;, &quot;#{&quot; + ecvp.getELPath()</td></tr>
<tr><td class="diffadd">        + &quot;.instructions}&quot;);</td></tr>
<tr><td class="diffadd">    UIInternalLink.make(form, &quot;recipe-show&quot;, new EntityCentredViewParameters(</td></tr>
<tr><td class="diffadd">        RecipeShow.VIEW_ID, ecvp.entity));</td></tr>
<tr><td class="diffadd">    form.parameters.add(new UIELBinding(&quot;#{&quot; + ecvp.getELPath() + &quot;.date}&quot;,</td></tr>
<tr><td class="diffadd">        new Date()));</td></tr>
<tr><td class="diffadd">    UICommand.make(form, &quot;recipe-save&quot;);</td></tr>
<tr><td class="diffadd">    UIInternalLink.make(form, &quot;recipe-list&quot;, new SimpleViewParameters(</td></tr>
<tr><td class="diffadd">        Recipes.VIEW_ID));</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">  public List reportNavigationCases() {</td></tr>
<tr><td class="diffadd">    List togo = new ArrayList();</td></tr>
<tr><td class="diffadd">    togo.add(new NavigationCase(null, new SimpleViewParameters(Recipes.VIEW_ID)));</td></tr>
<tr><td class="diffadd">    return togo;</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">  public ViewParameters getViewParameters() {</td></tr>
<tr><td class="diffadd">    return new EntityCentredViewParameters(VIEW_ID, new EntityID(&quot;Recipe&quot;, null));</td></tr>
<tr><td class="diffadd">  }</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">}</td></tr>
<tr><td class="diffadd">}}}</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">This view marks itself as requiring non-default ViewParameters by implementing the {{ViewParamsReporter}} interface - this returns the same &quot;exemplar&quot; object (of type EntityCentredViewParameters) as was encoded at the end of the [XML view|https://saffron.caret.cam.ac.uk/svn/projects/RSFHibernateCookbook/trunk/category/src/webapp/WEB-INF/producers/recipe-edit.xml].</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Similarly, it registers &quot;JSF-style&quot; navigation rules for itself by implementing {{NavigationCaseReporter}}, again returning the same rule list. as was encoded in the {{navigation-case}} XML tag. Unlike JSF navigation rules which are entered in the global {{faces.config}} file, RSF's treatment allows views to be more modular. </td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">What's quite interesting is the definition of the selection control named {{category}} - while we would have the power in Java to construct the &quot;final form&quot; {{String[[]}} representing the option labels and IDs in code, the code for this would be quite tedious. In a more functional language than Java this would be easy to achieve using transforms and maps, but here it actually turns out much more concise to let RSF's EL system to do the legwork for us - we actually issue the exact same [UISelect] object complete with ELs as we do in XML.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">!!Conclusion</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">This Java app is somewhat more concise than the XML version, will perform considerably better, and is ready for scaling up to arbitrary complexity and horsepower thanks to the &quot;heavy muscle&quot; of Spring and Hibernate behind the scenes (the latter as far behind the scenes as we can make it). We cannot boast equal concision to the Ruby version, which is advertised at the end of the tutorial as weighing in at 47 lines of Ruby (we have around 3x that quantity of Java code) - but are probably doing a lot better than any comparable Java framework. A lot of the verbosity is a direct consequence of achieving the ''complete'' presentation/logic separation &quot;holy grail&quot; - having separated these two we must go to the trouble of matching them up again (with {{rsf:id}}s). While this involves more typing, the coherence and stability of our projects will benefit enormously in the long-term. One aspect of this is that our app already has much &quot;longer legs&quot; than the Ruby equivalent - it is ready to leap into strange hosting environments (portals or other proxies) and different UI technologies with which a scripted app with mixed style and logic would suffer.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Some more of the verbosity is sadly simply inherent in Java - accessor methods, constructor calls, and package-qualified names. Luckily in the environment of modern tools such as Eclipse, this extra text rarely translates to extra ''typing''.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">Having looked through these 3 tutorials, you have seen pretty much all of RSF. One important feature of RSF is that it is very ''loosely bundled'' - looking through its Spring files, you will see that there is no particularly solid distinction between &quot;framework&quot; components and &quot;user&quot; components, which makes it an ideal integration platform as well as making it unprecedentedly easy to adapt to different ways of working. I hope that its users will enter a more close relationship with the source base than is usual (easier since the code base remains pretty compact), and look forward to all sorts of interesting and productive components being designed and swapped across the community.</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">I thank you!</td></tr>
<tr><td class="diffadd"></td></tr>
<tr><td class="diffadd">----</td></tr>
<tr><td class="diffadd">Head   - [Hibernate Cookbook|HibernateCookBook]\\</td></tr>
<tr><td class="diffadd">Page 1 - [Query beans, templates and views|HibernateCookBook_1]\\</td></tr>
<tr><td class="diffadd">Page 2 - [Request scope bindings and error handling|HibernateCookBook_2]\\</td></tr>
<tr><td class="diffadd">Page 3 - [The main app - entity selectors and Javascript|HibernateCookBook_3]\\</td></tr>
<tr><td class="diffadd">Page 4 - Let's hear that one more time - this time in Java\\</td></tr>
<tr><td class="diffadd">----</td></tr>
</table>
 
  </div>
</div>
</form>

  
  

	
    
    

    

    <div class="zebra-table sortable table-filter">
    <table class="wikitable" >
      <tr>
        <th>Version</th>
        <th>Date Modified</th>
        <th>Size</th>
        <th>Author</th>
        <th>Changes ...</th>
        <th class='changenote'>Change note</th>
      </tr>

      
      
      <tr>
        <td>
          <a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_4&amp;version=-1" accesskey="" title="">
            
          </a>
        </td>

	    <td style="white-space:nowrap;" sortvalue="Wed, 19 Jul 2006 09:36:21">
        19-Jul-2006 09:36
        </td>
        <td style="white-space:nowrap;text-align:right;">
          
          14.147&nbsp;kB
        </td>
        <td>UnknownAuthor</td>

        <td>
          

          
        </td>

         <td class="changenote">
           
           
         </td>

      </tr>
      
      

    </table>
    </div>
    
    
  </div>


  <div style="clear:both;" ></div>
</div>













      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="http://rsf.fluidproject.org/wiki/Diff.jsp?page=HibernateCookBook_4&amp;r1=-1&amp;r2=1">19-Jul-2006 09:36</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="http://rsf.fluidproject.org/wiki/Login.jsp?redirect=HibernateCookBook_4" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="http://rsf.fluidproject.org/wiki/UserPreferences.jsp?redirect=HibernateCookBook_4"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_4&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="http://rsf.fluidproject.org/wiki/images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="http://rsf.fluidproject.org/wiki/images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook">HibernateCookBook</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_1">HibernateCookBook_1</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_2">HibernateCookBook_2</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=HibernateCookBook_3">HibernateCookBook_3</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=IDDefunnellingReshaper">IDDefunnellingReshap...</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=LogonTest_3">LogonTest_3</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=NumberGuessing">NumberGuessing</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=NumberGuessing_3">NumberGuessing_3</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=OTP">OTP</a><br /><a class="wikipage" href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=QampA">QampA</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="http://rsf.fluidproject.org/wiki/Wiki.jsp?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Diff.jsp?page=HibernateCookBook_4&r1=-1 by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:55:20 GMT -->
</html>
