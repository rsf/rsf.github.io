











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=InitBlock by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: InitBlock
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=InitBlock' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='InitBlock' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Logincec5.html?redirect=InitBlock" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferencescec5.html?redirect=InitBlock"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">InitBlock</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'Wiki195c.html?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'Search136d.html?query=__PAGEHERE__','InitBlock' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wiki5fdf.html?page=View">View</a>, <a class="wikipage" href="Wiki35d7.html?page=ViewTemplate">ViewTemplate</a>, <a class="wikipage" href="Wikida94.html?page=IKATFunctionCall">IKATFunctionCall</a>, <a class="wikipage" href="Wikieede.html?page=IKATAlgorithm">IKATAlgorithm</a>, <a class="wikipage" href="Wiki517d.html?page=BuildingRSFComponents">BuildingRSFComponents</a>, <a class="wikipage" href="Wikieedc.html?page=HibernateCookBook_1">HibernateCookBook_1</a>, <a class="wikipage" href="Wiki760a.html?page=IKATSerializer">IKATSerializer</a>, <a class="wikipage" href="Wiki2c4e.html?page=LogonTest_2">LogonTest_2</a>, <a class="wikipage" href="Wikid3cc.html?page=DataViews">DataViews</a>, <a class="wikipage" href="Wikic2ec.html?page=RSFJSLibrary">RSFJSLibrary</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki81b4.html?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfof5e4.html?page=InitBlock' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<h3 id="section-InitBlock-UsingJavascriptIIInitBlocksFormerlyRSJCIS">Using Javascript II: Init Blocks (formerly &quot;RSJCIS&quot;)<a class="hashlink" href="#section-InitBlock-UsingJavascriptIIInitBlocksFormerlyRSJCIS">#</a></h3>
<p>The best method for packaging initialisation code that a (Javascript) client-side component implementation requires is still the subject of some debate. We discard the first possibility, rendering code onto the attributes of the tags, immediately, since it violates the primary rule of <a class="external" href="http://en.wikipedia.org/wiki/Unobtrusive_JavaScript">unobstrusive Javascript</a><img class="outlink" src="images/out.png" alt="" /> - markup and logic would be inextricably mixed.
</p>
<p>Somewhat less standardly, we also discard the second possibility, that of adding event handlers to a global <tt>onload</tt> handler for the document. <tt>onload</tt> is traditionally quite a battleground of technologies, and in some environments (e.g. Portlets) may not even be accessible at all. We *must* have component implementations which are as free of environmental interactions as possible, and capable of surviving in any environment - RSF must not place requirements on a particular technology used for managing <tt>onload</tt>. Onload implementations can also lead to accelerating degradation in performance, with a larger number of components appearing on a page each requiring their own <tt>onload</tt> hook together with a possible scan of the entire DOM. 
</p>
<p>A good compromise between the various alternatives is to package *all* of the component implementation code in a separate <tt>.js</tt> file, with the single exception of a single Javascript call issued from a <tt>&lt;script&gt;</tt> tag placed immediately after the rendered markup, which accepts whatever parameters required from the server required to contextualise and initialise the component. At the very least, this will include the <tt>namebase</tt> value, traditionally supplied as the first value. This kind of block has been named an &quot;init block&quot; (formerly the not-very-catchy  &quot;Render Single Javascript Call in &lt;script&gt;&quot; (RSJCIS) strategy).
</p>
<p>RSF includes various utility functions in <tt>HTMLUtil</tt> to make the rendering of this call quick and idiomatic. As of RSF 0.7.2, there is a new first-class component <tt>UIInitBlock</tt> to make this process even more natural:
</p>
<p>For example, the initialisation call for the double selection control is rendered like this:
</p>
<pre>
       UIInitBlock.make(togo, &quot;init-select&quot;, JSInitName, togo);
</pre>
Note that any <tt>UIComponent</tt> you supply to <tt>UIInitBlock</tt> will be converted to its <a class="wikipage" href="Wikid8cf.html?page=IDs">full ID</a> automatically. Also, any <a class="wikipage" href="Wikib32a.html?page=ViewParameters">ViewParameters</a> object you supply will be converted to an AJAX URL suitable for targetting that view.
<p>This component peers with a tag in the <a class="external" href="https://saffron.caret.cam.ac.uk/svn/projects/RSFComponents/trunk/templates/src/webapp/content/templates/double-list-select.html">template</a><img class="outlink" src="images/out.png" alt="" /> that looks as follows:
</p>
<pre>
&lt;script rsf:id=&quot;init-select&quot;&gt;
  DoubleList.init_DoubleList(&quot;input-doublelist:&quot;);
&lt;/script&gt;
</pre>
<h4 id="section-InitBlock-NoteOnPreviewability">Note on previewability<a class="hashlink" href="#section-InitBlock-NoteOnPreviewability">#</a></h4>
Note that the template for this view is filled in not just with dummy values for these Javascript definitions, but calls that actually allow the active parts of the component to function. The initialisation call present by default in the template prepares the component as if for a namebase of <tt>input-doublelist:</tt>. Now if we look up to the actual component definition further up in the template, we see that all the relevant tags have been prepared with ids as if rendered by RSF with this namebase - for example above we saw the &quot;move left button&quot; defined as 
<pre>
  &lt;input type=&quot;button&quot; id=&quot;input-doublelist:move-left&quot; 
           rsf:id=&quot;move-left&quot; title=&quot;Move selected&quot; value=&quot;&amp;lt;&quot;&gt;&lt;/input&gt;
</pre>
<p>Technically <tt>input-doublelist:</tt> is not a valid RSF namebase since it contains a single colon, but this is unimportant. It looks tidy, and works by the same prefix rules. When RSF renders the tags in the component implementation, it will replace all the <tt>id</tt> attributes with those from this particular instantiation, with a namebase that agrees with the value rendered in the JS init call. The template works both standalone in the filesystem, as well as when replicated any number of times in a rendered page. 
</p>
<p>Note that by default RSF will not allocate any client-side IDs at all in the rendered markup unless it finds an <tt>id</tt> there already - the attribute <tt>id=&quot;input-doublelist:move-left&quot;</tt> isn't just helpful for previewability, we need to write at least <i>some</i> id there of some kind, else the component could not function at all.
</p>
<p>You can view the plain template for this view <a class="external" href="http://ponder.org.uk/RSFComponents-templates/content/templates/double-list-select.html">live</a><img class="outlink" src="images/out.png" alt="" /> on the demonstration site. Note that this template is served plainly over HTTP and is backed by no server-side Java logic.
</p>
<p>(Back to <a class="wikipage" href="Wiki517d.html?page=BuildingRSFComponents">BuildingRSFComponents</a>)
</p>






        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff3cbf.html?page=InitBlock&amp;r1=-1&amp;r2=1">16-Jul-2008 15:39</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Logincec5.html?redirect=InitBlock" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferencescec5.html?redirect=InitBlock"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki3fe5.html?page=InitBlock&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wikib2ab.html?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki4d3f.html?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="Wikid6f0.html?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki4c8c.html?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wikib1ce.html?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wikia56b.html?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki4509.html?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wikif010.html?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki45f9.html?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki30c9.html?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki0e27.html?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki1a8d.html?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wikiadaf.html?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki84f4.html?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wikif345.html?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki1535.html?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki580c.html?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki654d.html?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wikia360.html?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki151d.html?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki702d.html?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki5fc7.html?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wikife97.html?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki5130.html?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki5f9e.html?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki917c.html?page=AJAX">AJAX</a><br /><a class="wikipage" href="Wiki517d.html?page=BuildingRSFComponents">BuildingRSFComponent...</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=InitBlock by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:34 GMT -->
</html>

