











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=IKATFunctionCall by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>
    RSF Wiki: IKATFunctionCall
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=IKATFunctionCall' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='IKATFunctionCall' />
<meta name="wikiUserName" content='207.119.0.6' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki702d.html?page=FindPage"
    title='Search RSF Wiki' />
<link rel="help"   href="Wikia3b7.html?page=TextFormattingRules"
    title="Help" />

 <link rel="start"  href="Wikib2ab.html?page=Main"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login6e0c.html?redirect=IKATFunctionCall" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences6e0c.html?redirect=IKATFunctionCall"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">IKATFunctionCall</div>

  <div class="searchbox">






<form action="http://rsf.fluidproject.org/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( 'Wiki195c.html?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( 'Logine830.html?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'Search136d.html?query=__PAGEHERE__','IKATFunctionCall' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wikieb40.html?page=HandlerSequence">HandlerSequence</a>, <a class="wikipage" href="Wikif9b7.html?page=Level1Error">Level1Error</a>, <a class="wikipage" href="Wikie53d.html?page=MultiRequestState">MultiRequestState</a>, <a class="wikipage" href="Wiki4b23.html?page=NavigationCase">NavigationCase</a>, <a class="wikipage" href="Wikib32a.html?page=ViewParameters">ViewParameters</a>, <a class="wikipage" href="Wiki044d.html?page=Tapestry">Tapestry</a>, <a class="wikipage" href="Wiki2364.html?page=RIFE">RIFE</a>, <a class="wikipage" href="Wiki5b2e.html?page=WebWork">WebWork</a>, <a class="wikipage" href="Wiki5fdf.html?page=View">View</a>, <a class="wikipage" href="Wiki35d7.html?page=ViewTemplate">ViewTemplate</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki81b4.html?page=MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfoda94.html?page=IKATFunctionCall' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<p>The key step to the IKAT algorithm is the <i>IKAT function call</i> which allows the renderer to leap dynamically around the set of template files, guided by a form of &quot;argument matching process&quot; which locates the most &quot;suitable&quot; of a set of tags sharing the same ID, to be used to render the component which it currently has in its hands.
</p><p>If you have got here via the link from the <a class="wikipage" href="Wikieede.html?page=IKATAlgorithm">IKAT algorithm</a>, then you will know that at this point the IKAT algorithm is in the &quot;extended state&quot;, having in its hands a &quot;current container&quot;, a particular child of this container which is <i>also</i> a container (called the PSC), and is at an index in the template file holding a tag (the &quot;forking tag&quot;) whose prefix agrees with the prefix of the PSC. The &quot;current container&quot; is peering with a tag called the &quot;scoping tag&quot;, which will be the nearest ancestor of the &quot;forking tag&quot; which mentions an <tt>rsf:id</tt>.
</p>
<p>If you got here by some other means, you will probably not want to read on much further.
</p>
<h3 id="section-IKATFunctionCall-IKATFunctionCallResolutionInDetail"> IKAT Function Call Resolution in detail<a class="hashlink" href="#section-IKATFunctionCall-IKATFunctionCallResolutionInDetail">#</a></h3>
<p>At this point IKAT assembles the <a class="wikipage" href="Wiki7fdf.html?page=ResolutionSet">resolution set</a> for the function call, which consists of <i>all</i> tags throughout the current set of template files which share the prefix of the PSC. It then scans through all of these, assigning them a priority based on their quality of match to the PSC container.
</p>
<p>This procedure can be seen as one of &quot;argument matching&quot;, and it procedes based on the IDs of the <i>children of the PSC</i> (yes, that is, drawn from the <i>grandchild</i> components of the &quot;current container&quot;). The IDs of these children (called the set {I_P}) represent the &quot;producer demand&quot; on the template system, and can be seen as the &quot;actual arguments&quot; of the function call. These IDs are matched against the <i>child tag</i> IDs of the putative tags in the resolution set (which, you remember, share the prefix of the PSC). These IDs may be seen as the &quot;formal parameters&quot; of the function call, called the set {I_T}.
</p>
<p>For each tag T in the resolution set, IKAT computes a numeric priority, which essentially encodes a lexicographic ordering on three sorts of desirability. This logic is implemented in the <tt>evalDeficit</tt> function in <tt>ViewTemplate.java</tt>.The highest level of desirability is attached to there being NO MISSING MEMBERS from {I_T} that were demanded in {I_P}. IKAT adds a penalty of 1,000,000 for each missing child tag of this sort, assessed <i>solely by prefix</i>. 
</p>
<p>The second level of desirability is assesed by bringing the suffices of {I_P} into consideration. For each tag in {I_P} that does not have an <i>exact match, both in prefix and suffix</i> in {I_T}, IKAT adds a penalty of 1000.
</p>
<p>Penultimately, IKAT adds a penalty of 1 for each &quot;unficit&quot; - an <i>extra</i> tag in {I_T} that does <i>not</i> appear in {I_P}.
</p>
<p>IKAT will then select the target tag with the lowest overall priority, breaking ties with the following scheme<a class="footnoteref" href="#ref-IKATFunctionCall-1">[1]</a>:
</p>
<ol><li>FIRST priority to tags in the &quot;current scope&quot; (i.e. nested in the &quot;scoping tag&quot;) where the tag ID is an EXACT MATCH for the current template ID.
</li><li>SECOND priority to tags in the current scope where only the tag prefix is a match for the current template ID.
</li><li>THIRD priority to non-local tags where the tag ID is an exact match of the current template ID.
</li><li>FOURTH priority to non-local tags where only the tag prefix is a match for the current template ID.
</li></ol>Finally, IKAT adds a &quot;tie-break&quot; penalty of 1 for &quot;locality&quot; of the target tag. If the target tag is NOT a child of the &quot;current container&quot;.
<p>If after all of these rules have been followed, there are <i>still</i> multiple tags with the same priority (could happen quite easily where the tags have no children), IKAT will pick the first such tag in the document.
</p>
<p>Despite appearances, this algorithm runs really quite quickly (a few microseconds), and could no doubt be accelerated even further by some form of caching, since the template is expected to change very infrequently and will probably face only a small variety of distinct function call demands from producers during its lifetime.
</p>
<hr />
<a class="footnote" name="ref-IKATFunctionCall-1">[#1]</a> NB, these following rules could also be implemented by appending them to the low-order bits of the penalty, I have not got around to doing this since to be honest this level of fine-tuning is so subtle I suspect noone is likely to devise a template that relies on it. This of course being said at the moment of there being exactly 3 IKAT templates in the world....<br />
<a class="footnote" name="ref-IKATFunctionCall-2">[#2]</a> However, there does need to be a further &quot;tweak&quot; to the &quot;tie-break&quot; rules that will cause IKAT to cycle in sequence through all local tags which are equally good matches to the PSC, to allow rendering hacks like the &quot;every second table row a different colour&quot; type thing. So, together with the &quot;bit-ised&quot; version of <a class="footnoteref" href="#ref-IKATFunctionCall-1">[1]</a>, this results in using up the 3 low-order bits of the penalty scalar, multiplying all the above penalties by 8...







        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff2563.html?page=IKATFunctionCall&amp;r1=-1&amp;r2=1">19-Jul-2006 09:36</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login6e0c.html?redirect=IKATFunctionCall" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences6e0c.html?redirect=IKATFunctionCall"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki0799.html?page=IKATFunctionCall&amp;skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wikib2ab.html?page=Main">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki4d3f.html?page=ThisWiki">About</a></i><br />
</p><p><a class="wikipage" href="Wikid6f0.html?page=GettingStarted">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki4c8c.html?page=Developers">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wikib1ce.html?page=Javadocs">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wikia56b.html?page=Designers">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki4509.html?page=SampleRSFApps">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wikif010.html?page=Presentations">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki45f9.html?page=Acronyms">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki30c9.html?page=CurrentCode">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki0e27.html?page=TrunkCode">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki1a8d.html?page=CodeDistributions">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wikiadaf.html?page=OldCode">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki84f4.html?page=QampA">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wikif345.html?page=EmailLists">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki1535.html?page=People">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki580c.html?page=Roadmap">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki654d.html?page=Integrations">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wikia360.html?page=Concepts">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki151d.html?page=Philosophy">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki702d.html?page=FindPage">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki5fc7.html?page=RecentChanges">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wikife97.html?page=UnusedPages">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki5130.html?page=UndefinedPages">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki5f9e.html?page=PageIndex">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wikid8cf.html?page=IDs">IDs</a><br /><a class="wikipage" href="Wiki7157.html?page=IKAT">IKAT</a><br /><a class="wikipage" href="Wikieede.html?page=IKATAlgorithm">IKATAlgorithm</a><br /><a class="wikipage" href="Wiki7fdf.html?page=ResolutionSet">ResolutionSet</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wikib2ab.html?page=Main"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>

<!-- Mirrored from rsf.fluidproject.org/wiki/Wiki.jsp?page=IKATFunctionCall by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 07 Jun 2013 15:14:14 GMT -->
</html>

